import{r as e,u as I,f as T,a as U,P as O,L as $,j as l,m,C as k,I as D}from"./index-0d1883c8.js";function F(){const t=e.useRef(!1);return I(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function K(){const t=F(),[r,s]=e.useState(0),n=e.useCallback(()=>{t.current&&s(r+1)},[r]);return[e.useCallback(()=>T.postRender(n),[n]),r]}class A extends e.Component{getSnapshotBeforeUpdate(r){const s=this.props.childRef.current;if(s&&r.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function B({children:t,isPresent:r}){const s=e.useId(),n=e.useRef(null),c=e.useRef({width:0,height:0,top:0,left:0});return e.useInsertionEffect(()=>{const{width:p,height:a,top:u,left:x}=c.current;if(r||!n.current||!p||!a)return;n.current.dataset.motionPopId=s;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${x}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[r]),e.createElement(A,{isPresent:r,childRef:n,sizeRef:c},e.cloneElement(t,{ref:n}))}const N=({children:t,initial:r,isPresent:s,onExitComplete:n,custom:c,presenceAffectsLayout:p,mode:a})=>{const u=U(H),x=e.useId(),f=e.useMemo(()=>({id:x,initial:r,isPresent:s,custom:c,onExitComplete:i=>{u.set(i,!0);for(const o of u.values())if(!o)return;n&&n()},register:i=>(u.set(i,!1),()=>u.delete(i))}),p?void 0:[s]);return e.useMemo(()=>{u.forEach((i,o)=>u.set(o,!1))},[s]),e.useEffect(()=>{!s&&!u.size&&n&&n()},[s]),a==="popLayout"&&(t=e.createElement(B,{isPresent:s},t)),e.createElement(O.Provider,{value:f},t)};function H(){return new Map}function V(t){return e.useEffect(()=>()=>t(),[])}const g=t=>t.key||"";function G(t,r){t.forEach(s=>{const n=g(s);r.set(n,s)})}function W(t){const r=[];return e.Children.forEach(t,s=>{e.isValidElement(s)&&r.push(s)}),r}const j=({children:t,custom:r,initial:s=!0,onExitComplete:n,exitBeforeEnter:c,presenceAffectsLayout:p=!0,mode:a="sync"})=>{const u=e.useContext($).forceRender||K()[0],x=F(),f=W(t);let i=f;const o=e.useRef(new Map).current,C=e.useRef(i),y=e.useRef(new Map).current,b=e.useRef(!0);if(I(()=>{b.current=!1,G(f,y),C.current=i}),V(()=>{b.current=!0,y.clear(),o.clear()}),b.current)return e.createElement(e.Fragment,null,i.map(d=>e.createElement(N,{key:g(d),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:p,mode:a},d)));i=[...i];const v=C.current.map(g),R=f.map(g),M=v.length;for(let d=0;d<M;d++){const h=v[d];R.indexOf(h)===-1&&!o.has(h)&&o.set(h,void 0)}return a==="wait"&&o.size&&(i=[]),o.forEach((d,h)=>{if(R.indexOf(h)!==-1)return;const w=y.get(h);if(!w)return;const S=v.indexOf(h);let E=d;if(!E){const z=()=>{y.delete(h),o.delete(h);const L=C.current.findIndex(P=>P.key===h);if(C.current.splice(L,1),!o.size){if(C.current=f,x.current===!1)return;u(),n&&n()}};E=e.createElement(N,{key:g(w),isPresent:!1,onExitComplete:z,custom:r,presenceAffectsLayout:p,mode:a},w),o.set(h,E)}i.splice(S,0,E)}),i=i.map(d=>{const h=d.key;return o.has(h)?d:e.createElement(N,{key:g(d),isPresent:!0,presenceAffectsLayout:p,mode:a},d)}),e.createElement(e.Fragment,null,o.size?i:i.map(d=>e.cloneElement(d)))},Y=({sortt:t,setsortt:r})=>{const s=[{id:1,label:"Sort",func:function(){r(!t)}},{id:2,label:"Search"}],n={visible:{opacity:1,height:"auto"},hide:{opacity:0,height:0}};return l.jsx(m.div,{variants:n,initial:"hide",animate:"visible",exit:"hide",className:"rounded bg-slate-50 shadow-lg -translate-x-12 translate-y-1 absolute z-50",children:l.jsx("div",{className:"p-4 flex flex-col gap-3 text-center",children:s.map(c=>l.jsx(m.h2,{whileTap:{scale:.87},onClick:c==null?void 0:c.func,className:"cursor-pointer px-3 py-2 bg-blue-400 text-white rounded shadow",children:c.label},c.id))})})},_=({note:t})=>{const{Notes:r,setNotes:s}=k(),[n,c]=e.useState(!1),[p,a]=e.useState(t.notes),u=i=>{s(r.filter(o=>o.id!==i.id))},x=i=>{c(!n),s(r.filter(o=>o.id==i.id?o.notes=p:o))},f={visible:{opacity:1},hide:{opacity:0}};return l.jsxs(m.div,{layout:!0,initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.3,ease:"easeOut"},exit:{x:-100,opacity:0},className:"bg-gray-200 p-2 rounded flex gap-2",children:[n?l.jsx(D,{variants:f,initial:"hide",animate:n?"visible":"hide",transition:{duration:.3,ease:"easeIn"},whileTap:{scale:.97},value:p,onChange:i=>a(i.target.value)}):l.jsx(m.h2,{variants:f,initial:"hide",animate:n?"hide":"visible",transition:{duration:.3,ease:"easeOut"},className:"flex-1 text-2xl break-words",children:t.notes}),l.jsx(m.button,{whileTap:{scale:.8},onClick:()=>x(t),className:"bg-yellow-400 p-2 text-white rounded-lg",children:n?"Submit":"Edit"}),l.jsx(m.button,{whileTap:{scale:.8},className:"bg-red-400 p-2 text-white rounded-lg",onClick:()=>u(t),children:"Delete"})]},t.id)},J=()=>{const{Notes:t}=k(),[r,s]=e.useState(!1),[n,c]=e.useState(!1),p=()=>{let a=t;return n&&(a=[...t].sort((u,x)=>u.notes>x.notes?1:-1)),a};return l.jsxs("div",{className:"px-4",children:[l.jsxs("div",{className:"flex py-3",children:[l.jsx("h2",{className:"text-2xl",children:"Your Notes"}),l.jsxs("div",{className:"ml-auto relative select-none",children:[l.jsx(m.button,{whileTap:{scale:.87},onClick:()=>s(a=>!a),className:" bg-blue-400 px-3 py-2  rounded text-white ",children:"Filter"}),l.jsx(j,{children:r&&l.jsx(Y,{sortt:n,setsortt:c})})]})]}),l.jsx("div",{className:"flex flex-col gap-3",children:l.jsx(j,{layout:!0,children:t&&p().map(a=>l.jsx(_,{note:a},a.id))})})]})};export{J as default};
